{% extends "base.html" %}

{% block title %}Checkout | Empowr{% endblock %}

{% block content %}
<div class="checkout-page">
    <section class="checkout-items">
        <h1>Your basket</h1>

        {% if checkout_items %}
            {% for item in checkout_items %}
                <article class="checkout-item">
                    <div class="checkout-thumb">
                        {% if item.product.image %}
                            <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}">
                        {% else %}
                            <div class="checkout-thumb-placeholder"></div>
                        {% endif %}
                    </div>

                    <div class="checkout-main">
                        <h2>{{ item.product.name }}</h2>
                        <p>{{ item.product.description|default:"" }}</p>

                        <div class="checkout-meta">
                            <span>Qty: {{ item.quantity }}</span>
                            <span>£{{ item.total_price }}</span>
                        </div>
                    </div>
                </article>
            {% endfor %}
        {% else %}
            <p>Your basket is empty.</p>
        {% endif %}
    </section>

    <aside class="checkout-summary">
        <h2>Order summary</h2>

        <div class="summary-row">
            <span>Subtotal</span>
            <span>£{{ subtotal }}</span>
        </div>
        <div class="summary-row">
            <span>Delivery</span>
            <span>£{{ delivery }}</span>
        </div>
        <div class="summary-row summary-total">
            <span>Total</span>
            <span>£{{ total }}</span>
        </div>

        <button class="btn-primary" type="button" href="{% url 'checkout_customer' %}">
            Checkout       
        </button>
    </aside>
</div>
{% endblock %}
